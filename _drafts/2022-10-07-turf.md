---
layout: post
title: Turf!
excerpt: A game in progress.
categories:
- Game Design
- 'Programming '
splash: "/uploads/img_0701.jpeg"
similar_pages:
- _posts/2022-02-02-real-time-dynamic-matchmaking.md

---
So Iâ€™ve been working on a mobile location-based game for about 3/4 of a year now, and thought I should share more details.

When starting out on the project, I wanted to try creating multiplayer functionality. Mainly because it's really fun playing with friends, but also because it's a tough nut to crack. But I also didn't want to jump into the deep end of 60fps/physics/vfx network transport -- after checking out the Unity and Unreal solutions (both built-in and third party), it just seemed like too much to tackle with the limited time I had.

But I love turn-based multiplayer games (see: [Pocket Tanks](https://classic.blitwise.com/ptanks.html), I love that stuff), and it seemed like an easier place to start.

Next, I wanted to do something with mobile devices -- specifically, something _physical_. I wanted to see if I could make a game that requires movement.

So the gameplay I ended on is this: **players run around the real world, and use their devices to place virtual markers that create virtual territory. The team with the most owned territory at the end of the time limit wins.**

This comes with some interesting challenges:

1. Keeping track of players. Okay, so let's learn the iOS [Core Location](https://developer.apple.com/documentation/corelocation) service.
2. Keeping track of state, with multiplayer replication. For this, I thought I would give [Firebase Realtime Database](https://firebase.google.com/docs/database) a go. I've never worked with JSON-style or NoSQL databases before, so there's a thing. But I was intrigued by the potential for pseudo-realtime networking.
3. I didn't want to force players to define territory with outlines -- that seemed like too much busywork. So I went with a single marker placement at a location. That meant defining the territory programmatically. My instinct was to use [Voronoi Diagramming](https://en.wikipedia.org/wiki/Voronoi_diagram), which I think turned out pretty well.
4. Lastly, I wanted the territory to be dynamic throughout the game -- so that markers would "expire", and give up their territory. This also meant that the score couldn't be based only upon territory, but rather a territory per timescale value (currently per second).

[![turf](/uploads/turf.mp4)](/uploads/turf.mp4)